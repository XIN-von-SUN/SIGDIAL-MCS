# Configuration for Rasa NLU.
# https://rasa.com/docs/rasa/nlu/components/
language: en

pipeline:
# # No configuration for the NLU pipeline was provided. The following default pipeline was used to train your model.
# # If you'd like to customize it, uncomment and adjust the pipeline.
# # See https://rasa.com/docs/rasa/tuning-your-model for more information.
  # - name: WhitespaceTokenizer
  # # - name: RegexFeaturizer
  # - name: LexicalSyntacticFeaturizer
  # # - name: CountVectorsFeaturizer
  # - name: CountVectorsFeaturizer
  #   analyzer: char_wb
  #   min_ngram: 1
  #   max_ngram: 4
  # - name: DIETClassifier
  #   epochs: 1
  #   constrain_similarities: true
  # - name: EntitySynonymMapper
  # # - name: ResponseSelector
  # #   epochs: 10
  # #   constrain_similarities: true
  # # - name: FallbackClassifier
  # #   threshold: 0.3
  # #   ambiguity_threshold: 0.1


- name: SpacyNLP
  model: en_core_web_lg
- name: SpacyTokenizer
#- name: custom_components.custom_components.Analyzer
- name: RegexFeaturizer
- name: LexicalSyntacticFeaturizer
- name: CountVectorsFeaturizer
# - name: LanguageModelFeaturizer
#   model_name: "bert"
#   model_weights: "bert-base-cased"  # "rasa/LaBSE"  # "bert-base-multilingual-cased"  
#   # An optional path to a specific directory to download and cache the pre-trained model weights.
# cache_dir: null
- name: SpacyFeaturizer
# - name: "DucklingEntityExtractor"
#   # url of the running duckling server
#   url: "http://localhost:8000"
#   # dimensions to extract
#   dimensions: ["time"]
#   # if not set the default timezone of Duckling is going to be used
#   # needed to calculate dates from relative expressions like "tomorrow"
#   # timezone: "Europe/Berlin"
#   # Timeout for receiving response from http url of the running duckling server
#   # if not set the default timeout of duckling http url is set to 3 seconds.
#   timeout : 3
- name: SklearnIntentClassifier
- name: DIETClassifier
- name: CRFEntityExtractor
- name: SpacyEntityExtractor
- name: EntitySynonymMapper
- name: FallbackClassifier
  threshold: 0.1
  ambiguity_threshold: 0.05


# Configuration for Rasa Core.
# https://rasa.com/docs/rasa/core/policies/
policies:
# # No configuration for policies was provided. The following default policies were used to train your model.
# # If you'd like to customize them, uncomment and adjust the policies.
# # See https://rasa.com/docs/rasa/policies for more information.
    - name: RulePolicy
      # core_fallback_threshold: 0.3
      # core_fallback_action_name: action_default_fallback
      # enable_fallback_prediction: true
      restrict_rules: true
      check_for_contradictions: false
    - name: MemoizationPolicy
      max_history: 6
    # - name: AugmentedMemoizationPolicy
    #   max_history: 10
    - name: TEDPolicy
      max_history: 6
      # number_of_transformer_layers: 2
      # transformer_size: 256
      epochs: 150
      batch_size: 16
      # constrain_similarities: true
    # - name: UnexpecTEDIntentPolicy
    #   max_history: 25
    #   epochs: 200
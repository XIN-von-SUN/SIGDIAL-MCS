stories:
- story: goal setting - no goal
  steps:
  - action: utter_ask_permission_topic_goal_setting
  - intent: trigger_goal_setting
  - action: action_retrieval_db_goal
  - slot_was_set:
    - step_count_goal: null
  - action: goal_update_form
  - active_loop: goal_update_form
  - slot_was_set:
    - requested_slot: null
  - action: utter_goal_reflection

- story: goal setting - existed goal / goal affirm 
  steps:
  - action: utter_ask_permission_topic_goal_setting
  - intent: trigger_goal_setting
  - action: action_retrieval_db_goal
  - slot_was_set:
    - step_count_goal: 5000
  - action: utter_goal_confirm
  - intent: affirm
  - action: utter_goal_reflection

- story: goal setting - existed goal / goal deny
  steps:
  - action: utter_ask_permission_topic_goal_setting
  - intent: trigger_goal_setting
  - action: action_retrieval_db_goal
  - slot_was_set:
    - step_count_goal: 5000
  - action: utter_goal_confirm
  - intent: deny
  - action: utter_goal_update
  - action: goal_update_form
  - active_loop: goal_update_form
  - slot_was_set:
    - requested_slot: null
  - action: utter_goal_reflection


##########################################################################################################################################


responses:
  utter_ask_permission_topic_goal_setting:
  - text: Let's talk about your daily step count. Does that sound good to you?
    buttons:
    - title: "Sure"
      payload: '/trigger_goal_setting'
    - title: "No, I don't want to."
      payload: '/deny'
  utter_goal_confirm:
  - text: In an earlier conversation you told me your daily step count goal is {step_count_goal}. Is this still correct?
  utter_goal_update:
  - text: That is okay, we can change it.
  utter_ask_update_goal_value:
  - text: What do you want your new daily step count goal to be?
  utter_goal_reflection:
  - text: Great, so your daily step count goal is {update_goal_value}. That sounds good to me! Let's try and achieve this goal together. 
  

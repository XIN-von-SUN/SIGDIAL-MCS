version: "2.0"

stories:
# inconvenient
- story: inconvenient - change time-confirm time slot
  steps:
  - intent: trigger_inconvenient
  - action: utter_ask_if_have_time
  - intent: affirm
  - action: utter_ask_available_time_slot
  - intent: time_slot
  - action: utter_confirm_time_slot

- story: inconvenient - change time-not sure time slot
  steps:
  - intent: trigger_inconvenient
  - action: utter_ask_if_have_time
  - intent: affirm
  - action: utter_ask_available_time_slot
  - intent: not_sure
  - action: utter_not_sure_available_time

- story: inconvenient - no time
  steps:
  - intent: trigger_inconvenient
  - action: utter_ask_if_have_time
  - intent: deny
  - action: utter_stop_inconvenient


# stop conversation and quit
- story: stop intent - stop all the conversation and quit
  steps:
  - intent: stop
  - action: utter_stop_for_all
  - action: utter_goodbye


##########################################################################################################################################


- story: change topic action - permit new topic
  steps:
  - intent: trigger_change_topic
  - action: action_connector_change_topic_model
  
- story: change topic action - deny new topic
  steps:
  - intent: trigger_change_topic
  - action: action_connector_change_topic_model
  - intent: deny
  - action: utter_stop_ask_new_topic


##########################################################################################################################################


- story: starter - no profile / good mood / talk 
  steps:
  - intent: start
  # - action: action_retrieval_db_profile
  - slot_was_set:
    - name: null
  - action: utter_self_intro
  - action: name_form
  - active_loop: name_form
  - slot_was_set:
    - requested_slot: null
  - action: utter_greeting
  - intent: affirm
  - action: utter_greeting_reply_pos
  - action: utter_ask_if_talk 
  - intent: affirm
  - action: utter_ask_rehabilitation_type

- story: starter - no profile / good mood / no talk 
  steps:
  - intent: start
  # - action: action_retrieval_db_profile
  - slot_was_set:
    - name: null
  - action: utter_self_intro
  - action: name_form
  - active_loop: name_form
  - slot_was_set:
    - requested_slot: null
  - action: utter_greeting
  - intent: affirm
  - action: utter_greeting_reply_pos
  - action: utter_ask_if_talk 
  - intent: deny
  - action: utter_stop_greeting

- story: starter - no profile / bad mood / talk 
  steps:
  - intent: start
  # - action: action_retrieval_db_profile
  - slot_was_set:
    - name: null
  - action: utter_self_intro
  - action: name_form
  - active_loop: name_form
  - slot_was_set:
    - requested_slot: null
  - action: utter_greeting
  - intent: deny
  - action: utter_greeting_reply_neg
  - action: utter_ask_if_talk 
  - intent: affirm
  - action: utter_ask_rehabilitation_type

- story: starter - no profile / bad mood / no talk 
  steps:
  - intent: start
  # - action: action_retrieval_db_profile
  - slot_was_set:
    - name: null
  - action: utter_self_intro
  - action: name_form
  - active_loop: name_form
  - slot_was_set:
    - requested_slot: null
  - action: utter_greeting
  - intent: deny
  - action: utter_greeting_reply_neg
  - action: utter_ask_if_talk 
  - intent: deny
  - action: utter_stop_greeting

- story: starter - profile / good mood / talk 
  steps:
  - intent: start
  # - action: action_retrieval_db_profile
  - slot_was_set:
    - name: jack
  - action: utter_greeting
  - intent: affirm
  - action: utter_greeting_reply_pos
  - action: utter_ask_if_talk 
  - intent: affirm
  - action: utter_ask_rehabilitation_type

- story: starter - profile / good mood / no talk 
  steps:
  - intent: start
  # - action: action_retrieval_db_profile
  - slot_was_set:
    - name: mike
  - action: utter_greeting
  - intent: affirm
  - action: utter_greeting_reply_pos
  - action: utter_ask_if_talk 
  - intent: deny
  - action: utter_stop_greeting

- story: starter - profile / bad mood / talk 
  steps:
  - intent: start
  # - action: action_retrieval_db_profile
  - slot_was_set:
    - name: jos
  - action: utter_greeting
  - intent: deny
  - action: utter_greeting_reply_neg
  - action: utter_ask_if_talk 
  - intent: affirm
  - action: utter_ask_rehabilitation_type

- story: starter - profile / bad mood / no talk 
  steps:
  - intent: start
  # - action: action_retrieval_db_profile
  - slot_was_set:
    - name: Michael
  - action: utter_greeting
  - intent: deny
  - action: utter_greeting_reply_neg
  - action: utter_ask_if_talk 
  - intent: deny
  - action: utter_stop_greeting


##########################################################################################################################################


- story: pa - no talk pa
  steps:
  - action: utter_ask_permission_topic_pa
  - intent: deny
  - action: utter_pa_stop
  - action: action_connector_change_topic_model

- story: pa - satisfy
  steps:
  - action: utter_ask_permission_topic_pa
  - intent: trigger_pa
  - action: utter_ask_pa_satisfactory_level
  - intent: affirm
  - action: utter_pa_satisfactory_reflection
  - action: pa_satisfy_form
  - active_loop: pa_satisfy_form
  - slot_was_set:
    - requested_slot: null
  - action: action_pa_complete_reflection
  - action: utter_pa_satisfactory_final_reflection
  - action: action_connector_change_topic_model

- story: pa - no satisfy
  steps:
  - action: utter_ask_permission_topic_pa
  - intent: trigger_pa
  - action: utter_ask_pa_satisfactory_level
  - intent: deny
  - action: utter_pa_not_satisfactory_reflection
  - action: pa_not_satisfy_form
  - active_loop: pa_not_satisfy_form
  - slot_was_set:
    - requested_slot: null
  - action: action_pa_complete_reflection
  - action: utter_pa_not_satisfactory_final_reflection
  - action: action_connector_change_topic_model


##########################################################################################################################################


# - story: rating_importance_form - talk / high importance
#   steps:
#   - action: utter_ask_permission_topic_rating_importance
#   - intent: trigger_rating_importance
#   - action: rating_importance_form
#   - active_loop: rating_importance_form
#   - slot_was_set:
#     - requested_slot: null
#   - action: action_rating_importance_judge
#   - action: utter_rating_importance_ask_if_show_video

# - story: rating_importance_form - talk / low importance
#   steps:
#   - action: utter_ask_permission_topic_rating_importance
#   - intent: trigger_rating_importance
#   - action: rating_importance_form
#   - active_loop: rating_importance_form
#   - slot_was_set:
#     - requested_slot: null
#   - action: action_rating_importance_judge
#   - action: rating_importance_low_importance_form
#   - active_loop: rating_importance_low_importance_form
#   - slot_was_set:
#     - requested_slot: null
#   - action: action_rating_importance_stop
#   - action: utter_rating_importance_ask_if_show_video

- story: rating_importance_form - talk / medium importance
  steps:
  - action: utter_ask_permission_topic_rating_importance
  - intent: trigger_rating_importance
  - action: rating_importance_form
  - active_loop: rating_importance_form
  - slot_was_set:
    - requested_slot: null
  # - action: action_rating_importance_judge
  - action: rating_importance_medium_importance_form
  - active_loop: rating_importance_medium_importance_form
  - slot_was_set:
    - requested_slot: null
  - action: action_rating_importance_stop
  - action: utter_rating_importance_ask_if_show_video
  

- story: rating_importance_form - show video
  steps:
  - action: utter_rating_importance_ask_if_show_video
  - intent: affirm
  - action: utter_rating_importance_show_video
  - action: action_connector_change_topic_model

- story: rating_importance_form - no video
  steps:
  - action: utter_rating_importance_ask_if_show_video
  - intent: deny
  - action: action_connector_change_topic_model

- story: rating_importance_form - no talk / no video
  steps:
  - action: utter_ask_permission_topic_rating_importance
  - intent: deny
  - action: utter_rating_importance_ask_if_show_video
  - intent: deny
  - action: action_connector_change_topic_model


##########################################################################################################################################


